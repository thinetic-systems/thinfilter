$def with (data, action='Guardar')
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" CONTENT="text/html; charset=utf-8">
    <title>ERROR: No se puede conectar a esa dirección</title>
    <style type="text/css">
    <!--
    body{
      background-color:#ff0000;
      font-family:verdana,sans-serif
    }
    pre{
      font-family:sans-serif
    }
    #windowed{
      background-color:#ff6666;
      border:2px dotted #000;
      width:97%;
      padding-left: 20px;
      padding-right: 20px;
    }
    #footer {
        font-size: 0.8em;
        margin-top:20px;
        text-align: center;
    }
    #info {
        font-size: 2em;
        margin-top:20px;
        margin-left:100px;
        margin-right:100px;
    }
    .left {
        text-align: left;
    }
    .center {
        text-align: center;
    }
    #popup {
        display:none;
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
    }
    .popup_block {
        background: #ddd;
        padding: 10px 20px;
        border: 10px solid #fff;
        float: left;
        width: 480px;
        position: fixed;
        top: 20%;
        left: 50%;
        margin: 0 0 0 -250px;
        z-index: 100;
    }
    .popup_block .popup {
        float: left;
        width: 100%;
        background: #fff;
        margin: 10px 0;
        padding: 10px 0;
        border: 1px solid #bbb;
    }
    .popup h3 {
        margin: 0 0 20px;
        padding: 5px 10px;
        border-bottom: 1px solid #bbb;
        font-size: 1.5em;
        font-weight: normal;
    }
    .popup img.cntrl {
        position: absolute;
        right: -20px;
        top: -20px;
    }
    .popup table {width:70%; margin-left:15%; margin-right:15%; margin-top:50px; padding-bottom: 200px;}
    .close { position: absolute; right: 0; top: -5px; text-decoration: none; font-size: 1.5em;}
    -->
    </style>
    <script type="text/javascript">
function set_browser() {
var browser=navigator.userAgent;
document.getElementById('browser').innerHTML=browser;
}
function showForm() {
document.getElementById('hideshow').style.visibility = 'visible';
}
function hideForm(){
document.getElementById('hideshow').style.visibility = 'hidden';
}
</script>
</head>
<body onload='set_browser();'>
    <div id="windowed" class="center">
        
            <h1>Sistema de control de acceso</h1>
            <h2>:: Sitio no permitido ::</h2>
        
    </div>
    <hr noshade size="1px">
    <div id="windowed">
    $if data.info != None:
        $# poner con : para imprimir html
        <div id='info''>$:data.info</div>
    </div>
        
    <hr noshade size="1px">
    <div ID="windowed">
        <p><a href="javascript:showForm();">Estoy autorizado</a></p>
        <p>Informaci&oacute;n extra:</p>
        <ul>
            <li><b>Intentando conectar a: <a href="$data.url">$data.url</a></b></li>
            <li><b>Navegador: <spam id='browser'></spam></b></li>
        </ul>
    </div>
    
    <div id="footer">
        ThinFilter powered by Thinetic Systems SLNE
    </div>
    
    <div id="hideshow" style="visibility:hidden;">
    <div class="popup_block">
    <a class="close" href="javascript:hideForm();">&#8855;</a>
    <div class="popup">
        <h3>Acceso</h3>
        <form method="post" action="http://$data.src/login">
        <table>
            <tr>
                <td>Usuario: </td>
                <td><input type="text" name="username" id="username" value=""></td>
            </tr>
            <tr>
                <td>Contraseña: </td>
                <td><input type="password" name="password" id="password" value=""></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>
                    <input type="hidden" name="redirect" id="redirect" value="/stop/admin/unblock?rule=$data.targetclass&reason=$data.reason&urlbase64=$data.urlbase64">
                    <input type="hidden" name="url" id="url" value="$data.url">
                    <input type="hidden" name="urlbase64" id="urlbase64" value="$data.urlbase64">
                    <input type="hidden" name="clientname" id="clientname" value="$data.clientname">
                    <input type="hidden" name="clientident" id="clientident" value="$data.clientident">
                    <input type="hidden" name="srcclass" id="srcclass" value="$data.srcclass">
                    <input type="hidden" name="targetclass" id="targetclass" value="$data.targetclass">
                    <input type="hidden" name="reason" id="reason" value="$data.reason">
                    <input type="submit" id="Entrar" value="Entrar">
                </td>
            </tr>
        </form>
    </div>
    </div>
    </div>
    

</body>
</html>
